# PCA-HIJAB User Flow 문서

## 1. 문서 개요
- **프로젝트명**: PCA-HIJAB (Personal Color Analysis for Hijab)
- **작성일**: 2025-01-31
- **목적**: 현재 구현된 화면 기반 사용자 플로우 문서화
- **대상**: UI/UX 디자이너

## 2. 주요 User Flow

### 2.1 메인 진단 플로우 (Core Flow)

```
[시작: 홈페이지]
    ↓
[진단 시작 선택]
    ├─→ [로그인하고 진단] → 로그인 페이지
    │      ↓
    │   [로그인 완료]
    │      ↓
    └─→ [로그인 없이 진단]
           ↓
    [사진 업로드 페이지]
    • 드래그앤드롭 또는 파일 선택
    • 카메라 촬영 옵션
    • 이미지 미리보기
           ↓
    [업로드 검증]
    ├─→ [실패: 파일 크기 초과] → 에러 메시지 → 재업로드
    ├─→ [실패: 잘못된 형식] → 에러 메시지 → 재업로드
    └─→ [성공]
           ↓
    [분석 중 페이지]
    • 5단계 진행 표시
    • 각 단계별 애니메이션
    • 예상 시간: 5-7초
           ↓
    [결과 페이지]
    • 퍼스널컬러 타입 표시
    • 추천 색상 팔레트
           ↓
    [다음 액션]
    ├─→ [히잡 추천 받기] → 로그인 확인
    │      ├─→ [로그인됨] → 추천 폼
    │      └─→ [비로그인] → 로그인 유도
    ├─→ [결과 저장] → 로그인 유도
    └─→ [제품 보러가기] → 제품 목록
```

### 2.2 회원가입/로그인 플로우

#### 2.2.1 회원가입
```
[회원가입 페이지]
    ↓
[이메일 입력]
    ↓
[비밀번호 입력]
• 최소 8자, 영문+숫자+특수문자
• 실시간 강도 표시
    ↓
[비밀번호 확인]
    ↓
[이름 입력]
    ↓
[이용약관 동의]
    ↓
[회원가입 버튼 클릭]
    ├─→ [실패: 중복 이메일] → 에러 메시지
    ├─→ [실패: 유효성 검사] → 에러 메시지
    └─→ [성공]
           ↓
    [이메일 인증 안내]
           ↓
    [홈페이지로 이동]
```

#### 2.2.2 로그인
```
[로그인 페이지]
    ↓
[이메일/비밀번호 입력]
    ↓
[로그인 버튼 클릭]
    ├─→ [실패: 잘못된 정보] → 에러 메시지
    ├─→ [실패: 미인증 이메일] → 인증 요청 메시지
    └─→ [성공]
           ↓
    [이전 페이지 또는 홈으로 이동]
```

#### 2.2.3 비밀번호 찾기
```
[비밀번호 찾기 페이지]
    ↓
[이메일 입력]
    ↓
[전송 버튼 클릭]
    ↓
[이메일 전송 완료 메시지]
    ↓
[이메일 확인]
    ↓
[재설정 링크 클릭]
    ↓
[비밀번호 재설정 페이지]
    ↓
[새 비밀번호 입력]
    ↓
[비밀번호 확인]
    ↓
[재설정 완료]
    ↓
[로그인 페이지로 이동]
```

### 2.3 제품 탐색 플로우

```
[제품 목록 페이지]
    ↓
[필터 적용]
• 카테고리 선택
• 퍼스널컬러 선택
    ↓
[제품 그리드 업데이트]
    ↓
[제품 클릭]
    ↓
[제품 상세 페이지]
    ↓
[액션 선택]
    ├─→ [저장하기]
    │      ├─→ [로그인됨] → 저장 완료
    │      └─→ [비로그인] → 로그인 유도
    └─→ [구매하기]
           ↓
       [Shopee로 이동]
```

### 2.4 마이페이지 플로우

```
[마이페이지 진입]
    ├─→ [비로그인] → 로그인 페이지로 리다이렉트
    └─→ [로그인됨]
           ↓
    [마이페이지 메인]
           ↓
    [섹션 선택]
    ├─→ [퍼스널컬러 결과]
    │      ├─→ [결과 있음] → 결과 표시
    │      └─→ [결과 없음] → 진단 유도
    ├─→ [저장한 제품]
    │      ├─→ [제품 클릭] → 제품 상세
    │      └─→ [삭제] → 확인 모달 → 삭제
    └─→ [최근 본 제품]
           └─→ [제품 클릭] → 제품 상세
```

### 2.5 히잡 추천 요청 플로우

```
[결과 페이지에서 추천 받기]
    ↓
[로그인 확인]
    ├─→ [비로그인] → 로그인 유도
    └─→ [로그인됨]
           ↓
    [추천 폼 표시] (모달)
           ↓
    [Step 1: 소재 선택]
    • 실크, 면, 쉬폰 등
           ↓
    [Step 2: 투명도 선택]
    • 불투명, 반투명, 투명
           ↓
    [Step 3: 가격대 선택]
    • 저가, 중가, 고가
           ↓
    [Step 4: 핏 스타일 선택]
    • 루즈핏, 일반핏, 타이트핏
           ↓
    [Step 5: 색상 스타일 선택]
    • 파스텔, 비비드, 뉴트럴 등
           ↓
    [Step 6: 추가 요청사항]
    • 텍스트 입력 (선택)
           ↓
    [인스타그램 ID 입력]
           ↓
    [제출]
           ↓
    [완료 페이지]
    • DM 전송 안내
```

## 3. 엣지 케이스 및 에러 플로우

### 3.1 진단 실패 케이스
```
[AI 분석 실패]
    ├─→ [얼굴 인식 실패] → "정면 얼굴 사진을 업로드해주세요"
    ├─→ [네트워크 오류] → "연결을 확인하고 다시 시도해주세요"
    └─→ [서버 오류] → "잠시 후 다시 시도해주세요"
           ↓
       [재시도 버튼]
```

### 3.2 세션 만료
```
[장시간 미활동]
    ↓
[세션 만료]
    ↓
[API 호출 시 401 에러]
    ↓
[자동 로그아웃]
    ↓
[로그인 페이지로 이동]
• "세션이 만료되었습니다" 메시지
```

### 3.3 권한 없음
```
[권한이 필요한 페이지 접근]
    ↓
[인증 확인]
    ├─→ [비로그인] → 로그인 페이지
    └─→ [권한 부족] → 홈으로 리다이렉트
```

## 4. 관리자 플로우

### 4.1 관리자 로그인
```
[관리자 로그인 페이지]
    ↓
[API Key 입력]
    ↓
[검증]
    ├─→ [실패] → "잘못된 API Key입니다"
    └─→ [성공]
           ↓
    [관리자 대시보드]
```

### 4.2 제품 관리
```
[제품 관리 탭]
    ↓
[액션 선택]
    ├─→ [제품 추가]
    │      ↓
    │   [제품 정보 입력]
    │   • 이미지 업로드
    │   • 정보 입력
    │      ↓
    │   [저장]
    ├─→ [제품 수정]
    │      ↓
    │   [수정 폼]
    │      ↓
    │   [저장]
    └─→ [제품 삭제]
           ↓
       [확인 모달]
           ↓
       [삭제 완료]
```

### 4.3 추천 요청 관리
```
[추천 관리 탭]
    ↓
[대기 중 요청 목록]
    ↓
[요청 클릭]
    ↓
[상세 정보 확인]
• 사용자 정보
• 퍼스널컬러 결과
• 선호도
    ↓
[상태 업데이트]
    ├─→ [처리 중]
    └─→ [완료]
```

## 5. 모바일 특화 플로우

### 5.1 하단 네비게이션
```
[하단 네비게이션 바]
    ├─→ [홈] → 홈페이지
    ├─→ [진단] → 업로드 페이지
    ├─→ [제품] → 제품 목록
    └─→ [MY] → 마이페이지/로그인
```

### 5.2 카메라 촬영
```
[업로드 페이지]
    ↓
[카메라 아이콘 클릭]
    ↓
[카메라 권한 요청]
    ├─→ [거부] → 파일 선택으로 안내
    └─→ [허용]
           ↓
    [카메라 뷰]
           ↓
    [촬영]
           ↓
    [미리보기]
           ↓
    [사용/재촬영 선택]
```

## 6. 데이터 플로우 다이어그램

### 6.1 진단 데이터 플로우
```
사용자 → 이미지 업로드 → Frontend
                              ↓
                          세션 생성
                              ↓
                          AI API 호출
                              ↓
                          결과 수신
                              ↓
                          세션에 저장
                              ↓
                    결과 페이지에 표시
```

### 6.2 인증 데이터 플로우
```
로그인 정보 → Backend API
                  ↓
              검증 성공
                  ↓
         JWT 토큰 생성
                  ↓
    쿠키에 토큰 저장 (HttpOnly)
                  ↓
         사용자 정보 반환
                  ↓
         Frontend 상태 업데이트
```

## 7. 주요 인터랙션 패턴

### 7.1 로딩 상태
- 스피너 표시
- 프로그레스 바 (진단 시)
- 스켈레톤 UI (제품 목록)

### 7.2 에러 처리
- 토스트 메시지 (일시적 에러)
- 인라인 에러 (폼 검증)
- 에러 페이지 (페이지 로드 실패)

### 7.3 성공 피드백
- 토스트 메시지
- 체크 아이콘 애니메이션
- 페이지 전환

### 7.4 확인 요청
- 모달 다이얼로그
- 확인/취소 버튼
- 삭제 시 추가 확인

## 8. 접근성 고려사항

### 8.1 키보드 네비게이션
- Tab 키로 모든 인터랙티브 요소 접근
- Enter/Space로 버튼 실행
- Esc로 모달 닫기

### 8.2 스크린 리더
- 의미 있는 alt 텍스트
- ARIA 레이블
- 상태 변경 알림

### 8.3 터치 타겟
- 최소 44px × 44px
- 충분한 간격
- 명확한 피드백